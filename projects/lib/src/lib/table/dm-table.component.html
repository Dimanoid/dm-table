<div class="ngx-dmt-header-wrapper" [style.margin-right.px]="scrollBarWidth" #headerWrapper>
    <table class="ngx-dmt ngx-dmt-header">
        <colgroup>
            <col *ngFor="let cw of colWidths; let i = index" [style.width.px]="resizeColumnIndex > -1 ? colWidthsTmp[i] : cw">
        </colgroup>
        <thead>
            <tr class="ngx-dmt-header-row"
                cdkDropList cdkDropListOrientation="horizontal"
                (cdkDropListDropped)="columnHeaderDrop($event)">
                <th *ngFor="let ct of columnTemplates; let i = index; let l = last"
                    class="ngx-dmt-header-cell"
                    [ngClass]="ct.headerClass"
                    [class.ngx-dmt-sortable]="ct.sortable"
                    [class.ngx-dmt-resizeable]="ct.resizeable && !l"
                    [class.ngx-dmt-sorted]="sort && sort.colId == ct.colId"
                    [class.ngx-dmt-sorted-asc]="sort && sort.order > 0"
                    [class.ngx-dmt-sorted-desc]="sort && sort.order < 0"
                    cdkDrag cdkDragLockAxis="x">
                    <div class="ngx-dmt-column-title" (click)="ct.sortable ? toggleSort(i) : null">
                        <!-- {{ resizeColumnIndex > -1 ? colWidthsTmp[i] : colWidths[i] }} <small class="fw-n">({{ ct.minWidth }} - {{ ct.maxWidth ? ct.maxWidth : 'âˆž' }})</small> -->
                        <ng-container *ngIf="ct.headerTpl" [ngTemplateOutlet]="ct.headerTpl"></ng-container>
                        <ng-template [ngIf]="!ct.headerTpl">{{ ct.title }}</ng-template>
                    </div>
                    <div class="ngx-dmt-column-draghandle" cdkDragHandle><i class="ngx-dmt-column-draghandle-icon ngx-dmt-icon-font"></i></div>
                    <div *ngIf="ct.sortable" class="ngx-dmt-column-sort-container" (click)="toggleSort(i)"><i class="ngx-dmt-column-sort-toggle ngx-dmt-icon-font"></i></div>
                    <div *ngIf="ct.resizeable && !l" class="ngx-dmt-resizer"
                        [class.ngx-dmt-resizer-dragging]="resizeColumnIndex == i"
                        (mousedown)="resizeColumnStart(i, resizer, $event)" #resizer>
                    </div>
                </th>
            </tr>
        </thead>
    </table>
</div>
<div class="ngx-dmt-body-wrapper">
    <div *ngIf="resizerDiv && resizeColumnIndex > -1" class="ngx-dmt-resizer" [style.left.px]="resizerX"></div>
    <cdk-virtual-scroll-viewport [itemSize]="itemSize" class="ngx-dmt-body-wrapper-inner" (scroll)="scroll($event)">
        <table class="ngx-dmt ngx-dmt-body">
            <colgroup>
                <col *ngFor="let cw of colWidths" [style.width.px]="cw">
            </colgroup>
            <tbody *ngIf="rows">
                <tr *cdkVirtualFor="let r of rows; let ri = index">
                    <td *ngFor="let ct of columnTemplates; let i = index"
                        [ngClass]="ct.cellClass"
                        [style.white-space]="ct.whitespace">
                        <ng-container *ngIf="ct.cellTpl"
                            [ngTemplateOutlet]="ct.cellTpl"
                            [ngTemplateOutletContext]="{ row: r, ct: ct, $implicit: r[ct.colId], ci: i, ri: ri }">
                        </ng-container>
                        <ng-template [ngIf]="!ct.cellTpl">{{ r[ct.colId] }}</ng-template>
                    </td>
                </tr>
            </tbody>
        </table>
    </cdk-virtual-scroll-viewport>
</div>
<div *ngIf="hasFooter" class="ngx-dmt-footer-wrapper" [style.margin-right.px]="scrollBarWidth">
    <table class="ngx-dmt ngx-dmt-header">
        <colgroup>
            <col *ngFor="let cw of colWidths" [style.width.px]="cw">
        </colgroup>
        <tfoot>
            <tr>
                <td *ngFor="let ct of columnTemplates" [ngClass]="ct.footerClass">
                    <ng-container *ngIf="ct.footerTpl" [ngTemplateOutlet]="ct.footerTpl"></ng-container>
                    <ng-template [ngIf]="!ct.footerTpl">&nbsp;</ng-template>
                </td>
            </tr>
        </tfoot>
    </table>
</div>
<!-- 
<div class="ngx-dmt-footer-wrapper mt05 mb05" [style.padding-right.px]="scrollBarWidth">
    resizeColumnIndex: {{ resizeColumnIndex }},
    resizeColumnStartPoint: {{ resizeColumnStartPoint | json }},
    resizeColumnWidth: {{ resizeColumnWidth }}
</div>
 -->
